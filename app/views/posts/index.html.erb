<% provide(:title, 'Blog') %>
 <div id = "intro">
  <h1 id = "tagline">
    We are a group of developers and designers from Europe, curious about the emerging African tech hubs.
  </h1>

  <p>
    The trip has started on September 23, and it's been an amazing experience so far! African hackers: Munavutia
    Check out our Blog or Tumblr and see what's happening on Twitter! 
  </p>
</div>

<div id="map">
   
</div>

<hr>
<h1 class = "home-title">5 Weeks / 4 Countries / 9 Hackers</h1>
<hr>

<!-- everything else below here is the blogposts -->

<% if admin_signed_in? %>
  <%= link_to 'New Post', new_post_path, class: "btn btn-primary pull-right" %>
<% end %>
<% @posts.each do |post| %>
  <% if post.published || post.published == nil %>
    <div class="posts">
      <div class="row">
        <div class="span8">
          <h2><%= link_to post.title, post %></h2>
          <pre>Posted at <%= post.created_at %><span class="pull-right">Share:</span></pre>
          <%= raw post.content %>
          <% if post.tag_list.count > 0 %>
            <p>Tags:
            <% post.tag_list.each do |tag| %>
              <span class="label label-info"><%= link_to tag, tag_path(tag), style: "color:white;"%></span>
            <% end %>
            </p>
          <% end %>
          <% if post.comments.count > 0 %>
            <%= link_to pluralize(post.comments.count, " comment") + " so far.", "/posts/"+post.id.to_s+"#comments", class: "links" %>
          <% else %>
            <%= link_to "Leave a Comment", "/posts/"+post.id.to_s+"#add-comment", class: "links" %>
          <% end %>
          <br>

          <% if admin_signed_in? %>
            <span class="admin">
              <%= link_to 'Edit', edit_post_path(post) %> | 
              <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %>
            </span>
          <% end %>
          <br>
          
        </div>
      </div>
      <div class="span4"></div>
    </div>
  <% end %>
<% end %>
<div class="digg_pagination">
    <div class="page_info">
      <%= page_entries_info @posts %>
    </div>
    <%= will_paginate @posts, :container => true %>
  </div>

<script type="text/javascript">
  
$(document).ready(function(){ 

  var mapmaker = L.map('map', {
    scrollWheelZoom: false,
    zoomControl: false,
    attributionControl: false,
  }).setView([50.005, -7], 5); 

  L.tileLayer('http://{s}.tile.cloudmade.com/5e9427487a6142f7934b07d07a967ba3/114841/256/{z}/{x}/{y}.png', {
    attribution: 'EuroHackTrip',
    maxZoom: 18,
    opacity: 0.5
  }).addTo(mapmaker);

  var myIcon = L.icon({
  iconUrl: 'assets/bubble-pink.png',
  iconSize: [20, 20],
  iconAnchor: [10, 10],
  labelAnchor: [6, 0] // as I want the label to appear 2px past the icon (10 + 2 - 6)
  });

  // L.marker([51.72703, -0.04395], {
  // icon: myIcon
  // })
  // .bindLabel("London", {
  // noHide: true,
  // direction: 'auto'
  // }).addTo(mapmaker); 

  L.marker([48.89362, 2.37305], {
  icon: myIcon
  })
  .bindLabel("Paris", {
  noHide: true,
  direction: 'auto'
  }).addTo(mapmaker); 

  L.marker([50.76426, 4.79004], {
  icon: myIcon
  })
  .bindLabel("Brussels", {
  noHide: true,
  direction: 'auto'
  }).addTo(mapmaker);

  L.marker([52.32191, 5.18555], {
  icon: myIcon
  })
  .bindLabel("Amsterdam", {
  noHide: true,
  direction: 'auto'
  }).addTo(mapmaker); 

  L.marker([52.45601, 13.27148], {
  icon: myIcon
  })
  .bindLabel("Berlin", {
  noHide: true,
  direction: 'auto'
  }).addTo(mapmaker); 

  L.marker([46.98025, 7.60254], {
  icon: myIcon
  })
  .bindLabel("Zurich", {
  noHide: true,
    direction: 'auto'
  }).addTo(mapmaker); 

});  

</script>